<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE-Textile API - Swagger UI</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/swagger-ui-dist@3/swagger-ui.css">
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@3/swagger-ui-bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@3/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function () {
            const ui = SwaggerUIBundle({
                url: "/openapi.yaml",
                dom_id: "#swagger-ui",
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [SwaggerUIBundle.plugins.DownloadUrl],
                layout: "StandaloneLayout"
            });
            window.ui = ui;
        };
    </script>
</body>
</html>
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  count:
                    type: integer
                  products:
                    type: array
                    items:
                      \\$ref: '#/components/schemas/Product'
              examples:
                sample:
                  value:
                    status: success
                    count: 1
                    products:
                      - id: 1
                        name: Cotton Saree
                        category: Saree
                        price: 1499.0
                        rating: 4.5
  /api/v1/products/{product_id}:
    get:
      tags: [products]
      summary: Get product details
      parameters:
        - in: path
          name: product_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Product details
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  product:
                    \\$ref: '#/components/schemas/Product'
              examples:
                example:
                  value:
                    status: success
                    product:
                      id: 1
                      name: Cotton Saree
                      category: Saree
                      price: 1499.0
  /api/v1/products/suggested:
    get:
      tags: [products]
      summary: Get suggested/trending products
      responses:
        '200':
          description: Suggested products
  /api/v1/customer/trending-fabrics:
    get:
      tags: [discovery]
      summary: Trending fabrics with AI captions
      responses:
        '200':
          description: list of trending fabrics
  /api/v1/customer/popular-shops:
    get:
      tags: [discovery]
      summary: Popular shops (may include geo enrichment)
      responses:
        '200':
          description: Popular shops list
  /api/v1/customer/nearby-shops:
    get:
      tags: [discovery]
      summary: Nearby shops by coordinates
      parameters:
        - in: query
          name: lat
          schema:
            type: number
        - in: query
          name: lon
          schema:
            type: number
        - in: query
          name: radius
          schema:
            type: number
      responses:
        '200':
          description: Nearby shops
  /api/v1/customer/search:
    get:
      tags: [discovery]
      summary: Search shops and fabrics
      parameters:
        - in: query
          name: q
          schema:
            type: string
      responses:
        '200':
          description: Search results
  /catalog/load:
    post:
      tags: [catalog]
      summary: Load catalog CSV into database
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
      responses:
        '200':
          description: Catalog loaded
  /catalog/view:
    get:
      tags: [catalog]
      summary: View product catalog
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          description: Catalog items
          content:
            application/json:
              schema:
                type: array
                items:
                  \\$ref: '#/components/schemas/ProductCatalogItem'
  /catalog/search:
    get:
      tags: [catalog]
      summary: Search the catalog
      parameters:
        - in: query
          name: category
          schema:
            type: string
      responses:
        '200':
          description: Catalog search results
  /api/v1/inventory:
    get:
      tags: [inventory]
      summary: Fetch inventory items for a shop
      parameters:
        - in: query
          name: shop_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Inventory list
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  data:
                    type: array
                    items:
                      \\$ref: '#/components/schemas/InventoryItem'
  /api/v1/inventory/import:
    post:
      tags: [inventory]
      summary: Import inventory via CSV/XLSX
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                shop_id:
                  type: string
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: Import result
  /api/v1/inventory/edit:
    post:
      tags: [inventory]
      summary: Edit product price or stock
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                product_id:
                  type: integer
                price:
                  type: number
                stock:
                  type: integer
      responses:
        '200':
          description: Update success
  /api/v1/inventory/delete:
    delete:
      tags: [inventory]
      summary: Delete product by id
      parameters:
        - in: query
          name: product_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Deleted
  /api/v1/inventory/export:
    get:
      tags: [inventory]
      summary: Export inventory as Excel
      parameters:
        - in: query
          name: shop_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Excel file
  /api/v1/inquiry/submit:
    post:
      tags: [inquiry]
      summary: Submit a fabric inquiry with optional file
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                shop_id:
                  type: string
                user_id:
                  type: string
                file:
                  type: string
                  format: binary
                message:
                  type: string
      responses:
        '201':
          description: Inquiry submitted
          content:
            application/json:
              schema:
                \\$ref: '#/components/schemas/InquiryResponse'
              examples:
                success:
                  value:
                    status: success
                    message: Fabric inquiry analyzed and submitted successfully!
  /api/v1/inquiry/history:
    get:
      tags: [inquiry]
      summary: Get inquiry history for a user or shop
      parameters:
        - in: query
          name: user_id
          required: true
          schema:
            type: integer
        - in: query
          name: role
          schema:
            type: string
      responses:
        '200':
          description: Inquiry history
  /marketing/generate:
    post:
      tags: [marketing]
      summary: Generate AI marketing content from CSV or image
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Marketing generation result
  /marketing/allowed-extensions:
    get:
      tags: [marketing]
      summary: Allowed file extensions for marketing uploads
      responses:
        '200':
          description: Allowed extensions
  /api/v1/distributor/regional-demand:
    post:
      tags: [distributor]
      summary: Upload CSV and get regional demand AI insights
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Regional insights
          content:
            application/json:
              schema:
                \\$ref: '#/components/schemas/DistributorInsights'
  /api/v1/distributor/sample-format:
    get:
      tags: [distributor]
      summary: Get sample CSV structure for distributors
      responses:
        '200':
          description: Sample format
  /api/v1/distributor/regional-report:
    get:
      tags: [distributor]
      summary: Generate regional report PDF (downloadable)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: PDF file stream
  /api/v1/distributor/production-plan:
    post:
      tags: [distributor]
      summary: Generate AI production plan from uploaded CSV
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Production plan
          content:
            application/json:
              schema:
                \\$ref: '#/components/schemas/ProductionPlanResponse'
  /api/v1/distributor/export-plan:
    get:
      tags: [distributor]
      summary: Export suggested production plan as CSV
      security:
        - bearerAuth: []
      responses:
        '200':
          description: CSV stream
  /pdf/generate:
    post:
      tags: [pdf]
      summary: Generate a simple PDF report from JSON content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                subtitle:
                  type: string
                summary:
                  type: string
      responses:
        '200':
          description: PDF file stream
  /region-demand-heatmap/:
    get:
      tags: [analytics]
      summary: Heatmap points for regional demand
      responses:
        '200':
          description: Heatmap points
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  points:
                    type: array
                    items:
                      \\$ref: '#/components/schemas/HeatmapPoint'
  /compare-images/:
    post:
      tags: [images]
      summary: Compare input image with store images and return best match
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                input_image:
                  type: string
                  format: binary
      responses:
        '200':
          description: Comparison result
  /api/v1/stores/:
    get:
      tags: [stores]
      summary: Get list of stores (StoreRegion)
      responses:
        '200':
          description: Store list
  /top-selling-products/:
    get:
      tags: [analytics]
      summary: Top selling products analysis (external dataset)
      responses:
        '200':
          description: Top selling summary
  /trending_shops_bp/:
    get:
      tags: [analytics]
      summary: Trending shops from external sales + regions
      responses:
        '200':
          description: Trending shops + AI analysis
tags:
  - name: auth
  - name: products
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@3/swagger-ui-bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@3/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function () {
            const ui = SwaggerUIBundle({
                url: "/openapi.yaml",
                dom_id: "#swagger-ui",
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [SwaggerUIBundle.plugins.DownloadUrl],
                layout: "StandaloneLayout"
            });
            window.ui = ui;
        };
    </script>
</body>
</html>
